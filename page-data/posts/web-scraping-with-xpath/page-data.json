{"componentChunkName":"component---src-pages-posts-markdown-remark-frontmatter-slug-tsx","path":"/posts/web-scraping-with-xpath/","result":{"data":{"markdownRemark":{"html":"<p>XPath is very powerful, it's kind of a query language like SQL but for XML documents, including HTML documents, so it is a natural fit for web scraping. A lot of people never learn it and use CSS selectors and regex, and have a really hard time scraping anything complicated.</p>\n<p>Regex is great for parsing text, but not XML/HTML -- see <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">this famous StackOverflow answer</a> about it:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bec20ecdca4c5ddb549fae90e152229c/5d030/regex_html_SO.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.24324324324323%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADEklEQVR42n1U2XLaShDl/38mb/6Be504uQnGWEJCoxktCGSWMnBZhBDm5HQLQypxZaq6Zus+fXqZ6Wy3W6T5CLG1KIoCMs7n819FxvF4xOFwUKkPNebzOWbzGTrntxOOywm2mw1li0NFpaq6KldcV4cKdVWjrmvs9/vr+b7at/cXESedIw8X3j8oizGcTZAmDqlL4UyMhPsszXSfxA6J4z5OkVqHOLaUGHFkMSpGqr/5f4NOczohKUsaZfC9AecEJjIwVHaGRlw7GjvH9dAQOEFMY8fZchaHop9zXq/W6NRNjWzmkGcjmDBWJTGKgogAERkn6l2BmefEOQz8AFmSKZhEMQyGer98XaKDy5iMJ7x0qmDIJCY7x73lLE5sbPTOGgMbxQrsYnFuVUdsJY9XQPEoihKWhCcsHffDkEwFhKDCVsEkh6IbGg0/SVJEYYiX8uUGWI7LNixl47QIErJ4F2fCLmWIApSxSBJuwXaTKFzitEBalHfAcVYQIFY2GjIlIjtZWyqbcKhsDSUchMo0GrS5EwJSlBNb8MawmGBIBUNACS1g4kXZRMLYag7FgbSOhmmcgtpLRKL7KkU5vzMcj2FtTE85+yxhXpK2KJGwIwtWWGZpEad3VlssvhQko500/BWwGI0QMWdDiu/5NIyu1ZM0SDqMpqBlKcwkb5YFFCIpC1NVAnh5m2maotd9VKDA9+H3PQyefYYSaQ7ltQgjd3GgaZDGzjJ9YcEgwGK+uDHMs7xNtrwKMgv8Abz+c1ttGoYsiu956PWe0H/20P3+Az4dyuvy+74+hOnL7MZQvEjIYRAo2IAeh0HrIM9zves+PuJHt4uHLw/49/4efTqU8+jyina73S9tw69LQvv68E3ZPD094fP9F/Qee/B9Xz8Bj2n47+s33N3dKcvVcoXZdIoR8z+fzfnv4Qa4Xq71T3uZlLxcYEGZUrmUPc+b5ogj/73ddoflaqUV/WhcAZtjo39h0zR/fKa77ZHVn+J1vcF6u0dzetPzum7/ztbmN8CPxrtSWZ7w6dMrVye8vd0cfcTwJ+Aheyn/MnzjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"StackOverflow - Regex for HTML?\"\n        title=\"\"\n        src=\"/static/bec20ecdca4c5ddb549fae90e152229c/fcda8/regex_html_SO.png\"\n        srcset=\"/static/bec20ecdca4c5ddb549fae90e152229c/12f09/regex_html_SO.png 148w,\n/static/bec20ecdca4c5ddb549fae90e152229c/e4a3f/regex_html_SO.png 295w,\n/static/bec20ecdca4c5ddb549fae90e152229c/fcda8/regex_html_SO.png 590w,\n/static/bec20ecdca4c5ddb549fae90e152229c/5d030/regex_html_SO.png 771w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>CSS selectors are useful but not quite as powerful as XPath.</p>\n<p>A simple example of XPath looks like this: <code>//div[contains(@class, \"price\")]//text()</code> This means \"look for any div whose <code>class</code> attribute contains 'price', and give me the text inside each of those divs\". The result might be something like [\"$39\",\"$42\"] if our divs are <code>&#x3C;div class='price foo'>$34&#x3C;/div> ... blah blah ... &#x3C;div class='price spam'>$42&#x3C;/div></code>.</p>\n<p>For testing out and tweaking your XPath queries, the best tool I know is this Firefox plugin: <a href=\"https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/\">https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/</a> -- it gives you a pretty-looking CSS-styled view of what a given XPath query returns. It's much easier than looking at the raw HTML. I don't know of any good extensions in Chrome.</p>\n<p>I learned from <a href=\"http://www.w3schools.com/xsl/xpath_intro.asp\">http://www.w3schools.com/xsl/xpath_intro.asp</a> but I found that site really hard to follow for anything but the basics.</p>\n<h1>TODO: A REAL XPATH TUTORIAL HERE</h1>\n<p>Check out this incredibly handy cheat sheet:\n<a href=\"http://ricostacruz.com/cheatsheets/xpath.html\">http://ricostacruz.com/cheatsheets/xpath.html</a></p>","frontmatter":{"date":"April 11, 2016","slug":"web-scraping-with-xpath","title":"Web Scraping With XPath","splashImage":null}}},"pageContext":{"id":"1401e9f4-f490-5233-a998-e17bf5078023","frontmatter__slug":"web-scraping-with-xpath","__params":{"frontmatter__slug":"web-scraping-with-xpath"}}},"staticQueryHashes":[],"slicesMap":{}}